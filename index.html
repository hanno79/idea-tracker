<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idea Tracker</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/sql-wasm.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; background: #f5f5f5; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #333; margin-bottom: 20px; }
        
        /* Login */
        #login-screen { display: none; min-height: 100vh; align-items: center; justify-content: center; }
        #login-screen.active { display: flex; }
        .login-box { background: white; padding: 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        .login-box h2 { margin-bottom: 20px; text-align: center; color: #333; }
        .login-box input { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; }
        .login-box button { width: 100%; padding: 12px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; }
        .login-box button:hover { background: #0056b3; }
        .login-error { color: red; text-align: center; margin-top: 10px; display: none; }
        
        /* Loading */
        #loading { text-align: center; padding: 40px; color: #666; }
        
        /* App */
        #app-screen { display: none; }
        #app-screen.active { display: block; }
        
        .stats { display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
        .stat { background: white; padding: 15px 25px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); min-width: 100px; }
        .stat strong { font-size: 24px; display: block; }
        .stat span { color: #666; font-size: 14px; }
        
        .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px; }
        .logout-btn { padding: 8px 16px; background: #6c757d; color: white; border: none; border-radius: 4px; cursor: pointer; }
        
        .filters { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        .filter { padding: 8px 16px; background: white; border: 1px solid #ddd; border-radius: 20px; text-decoration: none; color: #333; font-size: 14px; cursor: pointer; }
        .filter:hover { border-color: #007bff; }
        .filter.active { background: #007bff; color: white; border-color: #007bff; }
        
        .ideas { display: grid; gap: 20px; }
        .idea { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .idea h3 { margin-bottom: 10px; color: #333; }
        .idea .problem { color: #e65100; font-weight: 500; margin-bottom: 10px; }
        .idea .description { color: #666; margin-bottom: 10px; }
        .idea .solutions { color: #2e7d32; font-size: 14px; margin-bottom: 10px; }
        .idea .meta { display: flex; gap: 15px; font-size: 12px; color: #999; flex-wrap: wrap; }
        .tag { padding: 4px 8px; background: #e3f2fd; border-radius: 4px; font-size: 12px; }
        
        .status-bar { margin-top: 15px; display: flex; gap: 10px; align-items: center; flex-wrap: wrap; }
        .status-label { font-size: 12px; color: #666; }
        .status-btn { padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; font-size: 12px; text-decoration: none; opacity: 0.6; }
        .status-btn:hover, .status-btn.active { opacity: 1; }
        .status-new { background: #e3f2fd; color: #1565c0; }
        .status-interesting { background: #fff3e0; color: #e65100; }
        .status-validated { background: #e8f5e9; color: #2e7d32; }
        .status-reject { background: #ffebee; color: #c62828; }
        
        .add-form { background: white; padding: 20px; border-radius: 8px; margin-bottom: 30px; }
        .add-form h2 { margin-bottom: 15px; }
        .form-row { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }
        .form-group { flex: 1; min-width: 200px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 500; }
        .form-group input, .form-group textarea, .form-group select { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; }
        .form-group textarea { min-height: 80px; }
        .btn { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 14px; }
        .btn:hover { background: #0056b3; }
        
        /* Responsive */
        @media (max-width: 600px) {
            body { padding: 10px; }
            .stat { min-width: 70px; padding: 10px 15px; }
            .stat strong { font-size: 18px; }
            .idea { padding: 15px; }
            .form-group { min-width: 100%; }
        }
    </style>
</head>
<body>
    <!-- Loading -->
    <div id="loading">Lade Datenbank...</div>
    
    <!-- Login Screen -->
    <div id="login-screen" class="active">
        <div class="login-box">
            <h2>üîê Idea Tracker Login</h2>
            <form id="login-form">
                <input type="password" id="password" placeholder="Passwort eingeben" required>
                <button type="submit">Login</button>
            </form>
            <p class="login-error" id="login-error">Falsches Passwort</p>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="app-screen">
        <div class="container">
            <div class="header-row">
                <h1>üí° Idea Tracker</h1>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
            
            <div class="stats">
                <div class="stat"><strong id="stat-total">0</strong><span>Total</span></div>
                <div class="stat"><strong id="stat-new">0</strong><span>Neu</span></div>
                <div class="stat"><strong id="stat-interesting">0</strong><span>Interessant</span></div>
                <div class="stat"><strong id="stat-validated">0</strong><span>Validiert</span></div>
                <div class="stat"><strong id="stat-rejected">0</strong><span>Verworfen</span></div>
            </div>
            
            <div class="filters">
                <a href="#" class="filter active" data-filter="">Alle</a>
                <a href="#" class="filter" data-filter="new">Neu</a>
                <a href="#" class="filter" data-filter="interesting">Interessant</a>
                <a href="#" class="filter" data-filter="validated">Validiert</a>
                <a href="#" class="filter" data-filter="reject">Verworfen</a>
            </div>
            
            <div class="add-form">
                <h2>+ Neue Idee hinzuf√ºgen</h2>
                <form id="add-form">
                    <div class="form-row">
                        <div class="form-group" style="flex: 2;">
                            <label>Titel *</label>
                            <input type="text" id="idea-title" required placeholder="Kurze Zusammenfassung">
                        </div>
                        <div class="form-group">
                            <label>Kategorie</label>
                            <select id="idea-category">
                                <option value="">-- Kategorie --</option>
                                <option value="productivity">Produktivit√§t</option>
                                <option value="finance">Finanzen</option>
                                <option value="health">Gesundheit</option>
                                <option value="education">Bildung</option>
                                <option value="business">Business</option>
                                <option value="lifestyle">Lifestyle</option>
                                <option value="tech">Technologie</option>
                                <option value="ai_ml">AI/ML</option>
                                <option value="communication">Kommunikation</option>
                                <option value="developer">Entwicklung</option>
                                <option value="security">Sicherheit</option>
                                <option value="other">Sonstiges</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Problem *</label>
                        <textarea id="idea-problem" required placeholder="Welches Problem wird gel√∂st?"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Quelle/Research *</label>
                            <input type="text" id="idea-source" required placeholder="z.B. Reddit, StackOverflow, eigene Idee...">
                        </div>
                        <div class="form-group">
                            <label>Bestehende L√∂sungen</label>
                            <input type="text" id="idea-solutions" placeholder="Was gibt es schon?">
                        </div>
                    </div>
                    <button type="submit" class="btn">Idee speichern</button>
                </form>
            </div>
            
            <div class="ideas" id="ideas-container"></div>
        </div>
    </div>

    <script>
        const PASSWORD = 'alfred2026';
        let db = null;
        let currentFilter = '';
        
        // Initialize SQLite database
        async function initDB() {
            const SQL = await initSqlJs({
                locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.8.0/${file}`
            });
            
            // Try to load existing database from localStorage
            const savedDb = localStorage.getItem('idea_tracker_db');
            if (savedDb) {
                const data = Uint8Array.from(atob(savedDb), c => c.charCodeAt(0));
                db = new SQL.Database(data);
            } else {
                // Create new database with initial data
                db = new SQL.Database();
                db.run(`
                    CREATE TABLE ideas (
                        id INTEGER PRIMARY KEY,
                        title TEXT,
                        problem TEXT,
                        description TEXT,
                        existing_solutions TEXT,
                        source TEXT,
                        category TEXT,
                        status TEXT DEFAULT 'new',
                        created_at TEXT
                    )
                `);
                
                // Insert initial data
                const initialData = [
                    ['Automatischer Notizen-Organisierer', 'Notizen werden verteilt gespeichert und sind schwer wiederzufinden', 'Tool das automatisch Notizen aus verschiedenen Quellen zusammenfasst und kategorisiert', 'Notion, Evernote, Apple Notes', 'Research', 'productivity', 'new', '2026-02-23 19:27:33'],
                    ['Meeting-Protokoll AI', 'Nach Meetings geht viel Information verloren, Follow-ups werden vergessen', 'Automatisches Erstellen von Meeting-Notes, Action-Items und Follow-up Erinnerungen', 'Otter.ai, Fireflies', 'Research', 'business', 'new', '2026-02-23 19:27:33'],
                    ['Cross-Platform Datei-Sync', 'Dateien liegen auf verschiedenen Cloud-Diensten und sind nicht automatisch synchronisiert', 'Ein Tool das verschiedene Cloud-Dienste verbindet und automatisch Dateien organisiert', 'Dropbox, Google Drive, OneDrive', 'Research', 'productivity', 'new', '2026-02-23 19:27:33'],
                    ['Einfache Business-Intelligence', 'BI-Tools sind zu kompliziert f√ºr kleine Unternehmen', 'Einsteigerfreundliches Dashboard-Tool das Daten aus verschiedenen Quellen visualisiert', 'Tableau, PowerBI', 'Research', 'business', 'new', '2026-02-23 19:27:33'],
                    ['Passwort-Manager Team-Features', 'Bestehende Passwort-Manager sind zu teuer oder haben keine guten Team-Features', 'Erschwinglicher Passwort-Manager mit einfacher Team-Freigabe', '1Password, Bitwarden, LastPass', 'Research', 'tech', 'new', '2026-02-23 19:27:33'],
                    ['KI-Agent Orchestrierung f√ºr KMUs', 'Kleine Unternehmen k√∂nnen sich keine teuren Enterprise-L√∂sungen f√ºr KI-Automatisierung leisten', 'Eine Plattform die es Nicht-Technikern erlaubt, KI-Agenten f√ºr wiederkehrende Gesch√§ftsprozesse zu erstellen', 'Zapier, Make.com, Microsoft Copilot Studio', 'Research', 'ai_ml', 'new', '2026-02-23 21:02:29'],
                    ['Meeting-Intelligence', 'Teure Enterprise-Tools f√ºr Meeting-Analyse sind f√ºr kleine Teams nicht erschwinglich', 'Einsteigerfreundliches Tool f√ºr Meeting-Transkription und Zusammenfassung', 'Otter.ai, Fireflies, Gong', 'Research', 'communication', 'new', '2026-02-23 21:02:29'],
                    ['Developer Documentation Generator', 'Dokumentation wird nach Entwicklung oft vergessen oder ist veraltet', 'Automatisches Erstellen von API-Dokumentation aus Code-Kommentaren', 'Swagger, JSDoc, Docusaurus', 'Research', 'developer', 'new', '2026-02-23 21:02:29'],
                    ['API-Monitoring f√ºr Entwickler', 'Existierende API-Monitoring-Tools sind entweder zu einfach oder zu komplex/teuer', 'Mid-tier API Monitoring mit guter Preis-Leistung f√ºr Indie-Developer', 'Postman, Datadog, New Relic', 'Research', 'developer', 'new', '2026-02-23 21:02:29'],
                    ['Local-First Collaboration', 'Bestehende Kollaborationstools sind abh√§ngig von Cloud-Verbindung', 'Offline-f√§hige Kollaborationstools die lokal arbeiten aber synchronisieren', '', 'Research', 'productivity', 'new', '2026-02-23 21:02:29'],
                    ['SaaS-Billing f√ºr deutsche Unternehmen', 'Internationale Billing-Tools integrieren schlecht mit deutschen Anforderungen', 'Billing-Plattform speziell f√ºr deutsche SaaS-Unternehmen mit lokaler Compliance', 'Stripe, Chargebee, Paddle', 'Research', 'business', 'new', '2026-02-23 21:02:29']
                ];
                
                const stmt = db.prepare('INSERT INTO ideas (title, problem, description, existing_solutions, source, category, status, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)');
                initialData.forEach(row => stmt.run(row));
                stmt.free();
                saveDb();
            }
            
            // Show app
            document.getElementById('loading').style.display = 'none';
            if (localStorage.getItem('logged_in') === 'true') {
                showApp();
            }
        }
        
        function saveDb() {
            const data = db.export();
            const base64 = btoa(String.fromCharCode.apply(null, data));
            localStorage.setItem('idea_tracker_db', base64);
        }
        
        function getIdeas() {
            const results = [];
            const stmt = db.prepare('SELECT * FROM ideas ORDER BY id DESC');
            while (stmt.step()) {
                results.push(stmt.getAsObject());
            }
            stmt.free();
            return results;
        }
        
        function addIdea(title, problem, description, existing_solutions, source, category) {
            const created_at = new Date().toISOString().replace('T', ' ').substring(0, 19);
            db.run('INSERT INTO ideas (title, problem, description, existing_solutions, source, category, status, created_at) VALUES (?, ?, ?, ?, ?, ?, ?, ?)',
                [title, problem, description, existing_solutions, source, category || 'other', 'new', created_at]);
            saveDb();
        }
        
        function updateStatus(id, status) {
            db.run('UPDATE ideas SET status = ? WHERE id = ?', [status, id]);
            saveDb();
        }
        
        // Login
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('password').value;
            if (password === PASSWORD) {
                localStorage.setItem('logged_in', 'true');
                showApp();
            } else {
                document.getElementById('login-error').style.display = 'block';
            }
        });
        
        function logout() {
            localStorage.removeItem('logged_in');
            document.getElementById('login-screen').classList.add('active');
            document.getElementById('app-screen').classList.remove('active');
        }
        
        function showApp() {
            document.getElementById('login-screen').classList.remove('active');
            document.getElementById('app-screen').classList.add('active');
            renderIdeas();
            updateStats();
        }
        
        // Add idea
        document.getElementById('add-form').addEventListener('submit', function(e) {
            e.preventDefault();
            addIdea(
                document.getElementById('idea-title').value,
                document.getElementById('idea-problem').value,
                document.getElementById('idea-description')?.value || '',
                document.getElementById('idea-solutions').value,
                document.getElementById('idea-source').value,
                document.getElementById('idea-category').value
            );
            renderIdeas();
            updateStats();
            document.getElementById('add-form').reset();
        });
        
        // Filters
        document.querySelectorAll('.filter').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.filter').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                currentFilter = this.dataset.filter;
                renderIdeas();
            });
        });
        
        function renderIdeas() {
            const container = document.getElementById('ideas-container');
            let ideas = getIdeas();
            let filtered = currentFilter ? ideas.filter(i => i.status === currentFilter) : ideas;
            
            if (filtered.length === 0) {
                container.innerHTML = '<p style="text-align:center;color:#666;padding:40px;">Noch keine Ideen vorhanden</p>';
                return;
            }
            
            container.innerHTML = filtered.map(idea => `
                <div class="idea">
                    <h3>${idea.title}</h3>
                    <p class="problem">Problem: ${idea.problem}</p>
                    ${idea.description ? `<p class="description">${idea.description}</p>` : ''}
                    ${idea.existing_solutions ? `<p class="solutions">‚¨° ${idea.existing_solutions}</p>` : ''}
                    <div class="meta">
                        <span>üìÖ ${idea.created_at}</span>
                        ${idea.source ? `<span>üìå ${idea.source}</span>` : ''}
                        ${idea.category ? `<span class="tag">${idea.category}</span>` : ''}
                    </div>
                    <div class="status-bar">
                        <span class="status-label">Status:</span>
                        <button class="status-btn status-new ${idea.status === 'new' ? 'active' : ''}" 
                            onclick="setStatus(${idea.id}, 'new')">Neu</button>
                        <button class="status-btn status-interesting ${idea.status === 'interesting' ? 'active' : ''}" 
                            onclick="setStatus(${idea.id}, 'interesting')">Interessant</button>
                        <button class="status-btn status-validated ${idea.status === 'validated' ? 'active' : ''}" 
                            onclick="setStatus(${idea.id}, 'validated')">Validiert</button>
                        <button class="status-btn status-reject ${idea.status === 'reject' ? 'active' : ''}" 
                            onclick="setStatus(${idea.id}, 'reject')">Verwerfen</button>
                    </div>
                </div>
            `).join('');
        }
        
        function setStatus(id, status) {
            updateStatus(id, status);
            renderIdeas();
            updateStats();
        }
        
        function updateStats() {
            const ideas = getIdeas();
            document.getElementById('stat-total').textContent = ideas.length;
            document.getElementById('stat-new').textContent = ideas.filter(i => i.status === 'new').length;
            document.getElementById('stat-interesting').textContent = ideas.filter(i => i.status === 'interesting').length;
            document.getElementById('stat-validated').textContent = ideas.filter(i => i.status === 'validated').length;
            document.getElementById('stat-rejected').textContent = ideas.filter(i => i.status === 'reject').length;
        }
        
        // Start
        initDB();
    </script>
</body>
</html>
